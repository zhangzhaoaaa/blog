<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
	.submitRule{display: "";}
	.hideRule{display: none;}
	.allHide{display: none;}
	</style>
	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
</head>
<body>
	<!--[if lt IE 7]>
	<p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
	<![endif]-->
	<!-- Add your site or application content here -->
	<p>Hello world! This is HTML5 Boilerplate.</p>
	<div>
		<form action="" id="f">
			<input type="text" id="a" name="a" value="a" class="allHide">
			<input type="button" id="abutton" name="abutton" value="abutton" class="allHide">
			<input type="text" id="b" name="b" value="b" class="allHide">
			<input type="text" id="c" name="c" value="c" class="allHide">
			<input type="text" id="d" name="d" value="d" class="allHide">
			<select name="" id="sel1">
				<option value="1">1</option>
				<option value="2">2</option>
				<option value="3">3</option>
				<option value="4">4</option>
				<option value="5">5</option>
			</select>
			<button id="rest" type="button">switch</button>
			<button id="submit" type="button">submit</button>
		</form>
	</div>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
	<script>
	/*var ruleAll = [{id:"a",className:"a"},{id:"d"}];//zhuce must show
	var ruleA = {type:"A",show:true,className:"submitRule",elements:[{id:"abutton"}]};//ruleA shows elements
	var ruleB = {type:"B",show:false,className:"hideRule",elements:[{id:"b"}]};
	var ruleC = {type:"C",show:false,className:"hideRule",elements:[{id:"c"}]};
		var rules=[ruleA,ruleB,ruleC];*/
	function test(){
		var key="B";
		FormShowHide.switchShow(key);
		FormShowHide.toggleEle();
		// switchShow(rules,key);
		//toggleEle(rules,key,ruleAll);
	}
	document.getElementById('rest').onclick=test;
	/*function toggleEle(rules,key,ruleAll){
		var ruleShow=[];
		var ruleAllHide=[];
		for (var k=0,len=rules.length;k<len;k++){
			if (!rules[k]["show"]){
				ruleAllHide=ruleAllHide.concat(rules[k]["elements"]);//need hide elemnets
			}else{
				ruleShow=ruleShow.concat(rules[k]["elements"]);//need show elements
			}
		}
		for (var i=0,lenx=ruleAllHide.length;i<lenx;i++){
			//$('#'+ruleAllHide[i]["id"]).hide();//hide others
			$('#'+ruleAllHide[i]["id"]).removeClass("submitRule").addClass("hideRule");//hide others
		}
		ruleShow=ruleShow.concat(ruleAll);//concat rule and ruleAll show elements
		for (var i=0,lenx=ruleShow.length;i<lenx;i++){
			//console.log(i+","+ruleShow[i]["id"]);
			//$('#'+ruleShow[i]["id"]).show();
			$('#'+ruleShow[i]["id"]).addClass("submitRule").removeClass("hideRule allHide");
		}
	}
	function switchShow(rules,key){
		for (var k=0,len=rules.length;k<len;k++){
			if (rules[k]["type"]===key){
				rules[k]["show"]=true;
				rules[k]["className"]="submitRule";
			}else{
				rules[k]["show"]=false;
				rules[k]["className"]="hideRule";
			}
		}
	}
	function showValues() {
			var fields = $(".submitRule").serializeArray();
			console.log(fields);
			var serializeObj={};
			var str=$(".submitRule").serialize();
			$(fields).each(function(){
			if(serializeObj[this.name]){
			if($.isArray(serializeObj[this.name])){
			serializeObj[this.name].push(this.value);
			}else{
			serializeObj[this.name]=[serializeObj[this.name],this.value];
			}
			}else{
			serializeObj[this.name]=this.value;
			}
			});
			console.log(serializeObj);
			return serializeObj;
			}*/
	$(function(){
		// var key="A";
		//toggleEle(rules,key,ruleAll);
		//FormShowHide.toggleEle();
		$('#submit').click(function(){
			//showValues();
			console.log(FormShowHide.showValues());
		});
	});
	(function(root,factory){
		root.FormShowHide = factory({});
	}(this,function(FormShowHide){
		var model={};
		FormShowHide.toggleEle=function(){
			var ruleShow=[];
			var ruleAllHide=[];
			for (var k=0,len=model.rules.length;k<len;k++){
				if (!model.rules[k]["show"]){
					ruleAllHide=ruleAllHide.concat(model.rules[k]["elements"]);//need hide elemnets
				}else{
					ruleShow=ruleShow.concat(model.rules[k]["elements"]);//need show elements
				}
			}
			for (var i=0,lenx=ruleAllHide.length;i<lenx;i++){
				$('#'+ruleAllHide[i]["id"]).removeClass("submitRule").addClass("hideRule");//hide others
			}
			ruleShow=ruleShow.concat(model.ruleAll);//concat rule and ruleAll show elements
			for (var i=0,lenx=ruleShow.length;i<lenx;i++){
				$('#'+ruleShow[i]["id"]).addClass("submitRule").removeClass("hideRule allHide");
			}
			model.ruleShow=ruleShow||[];
		};
		FormShowHide.switchShow=function(key){
			for (var k=0,len=model.rules.length;k<len;k++){
				if (model.rules[k]["type"]===key){
					model.rules[k]["show"]=true;
					model.rules[k]["className"]="submitRule";
				}else{
					model.rules[k]["show"]=false;
					model.rules[k]["className"]="hideRule";
				}
			}
		};
		FormShowHide.showValues=function(){
			var fields = $(".submitRule").serializeArray();
				var serializeObj={};
				var str=$(".submitRule").serialize();
				$(fields).each(function(){
				if(serializeObj[this.name]){
				if($.isArray(serializeObj[this.name])){
				serializeObj[this.name].push(this.value);
				}else{
				serializeObj[this.name]=[serializeObj[this.name],this.value];
				}
				}else{
				serializeObj[this.name]=this.value;
				}
				});
				return serializeObj;
		};
		FormShowHide.Model = function(options) {
				var ops = options || (options = {});
				model = $.extend({},ops);
				return this;
				};
		return FormShowHide;
	}));
	
	FormShowHide.Model({ruleAll:[{id:"a"},{id:"d"},{id:"sel1",tag:"select"}],rules:[{type:"A",show:true,className:"submitRule",elements:[{id:"abutton"}]},{type:"B",show:false,className:"hideRule",elements:[{id:"b"}]},{type:"C",show:false,className:"hideRule",elements:[{id:"c"}]}]}).toggleEle();
	</script>
	
</body>
</html>
